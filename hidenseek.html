<!DOCTYPE html>
<html>
<head>
    <title>Hide and Seek</title>
    <style>
        body {
            background-color: #add8e6;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            height: 100vh;
            flex-direction: column;
            font-family: Arial, sans-serif;
        }
        .scoreboard {
            margin-bottom: 20px;
            font-size: 24px;
            border: 1px solid #000;
            padding: 10px;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #fff;
            box-shadow: 0px 0px 10px rgba(0,0,0,0.1);
        }
        #score {
            flex-grow: 1;  /* Added this to make the score text fill the available space */
            white-space: nowrap;  /* Added this to prevent the score text from wrapping */
            overflow: hidden;  /* Added this to hide overflow if the text is too long */
            text-overflow: ellipsis;  /* Added this to add "..." at the end if the text is too long */
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            width: 90vw;
            max-width: 500px;
            padding: 5vw;
        }
        .cell {
            height: 18vw;  /* Adjusted height */
            border: 1px solid #000;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            user-select: none;
            font-size: 12vw;
            color: #444;
            transition: background-color 0.2s;
        }
        #reset {
            background-color: #f44336;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1.2em;
            border-radius: 5px;
            cursor: pointer;
            outline: none;
            box-shadow: 0px 0px 10px rgba(0,0,0,0.1);
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            padding-top: 100px;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            box-shadow: 0px 0px 10px rgba(0,0,0,0.1);
            border-radius: 5px;
        }
        @media (min-width: 600px) {
            .grid {
                width: 500px;  
                padding: 10px;
            }
            .cell {
                height: 100px;  /* Adjusted height for larger screens */
                font-size: 50px;
            }
            .scoreboard {
                width: 500px;
            }
        }
    </style>
</head>
<body>
    <div id="myModal" class="modal">
        <div class="modal-content">
            <h2>Welcome to Hide and Seek!</h2>
            <p>In this game, you will have to find the hidden cell. The cell will change its color based on how close you are to the hidden cell. The color goes from red (very close) to blue (very far).</p>
            <p>Each time you click a cell, your score decreases. Your aim is to find the hidden cell with the highest score possible.</p>
            <p>Click anywhere outside this box to close it and start playing!</p>
        </div>
    </div>
    <div id="scoreboard" class="scoreboard">
        <div id="score"></div>
        <button id="reset">Reset</button>
    </div>
    <div id="grid" class="grid"></div>

    <script>
        const gridSize = 25;
        let hiddenCell = Math.floor(Math.random() * gridSize);
        let score = gridSize; 
        let totalScore = 0; 
        let rounds = 0; 
        const grid = document.getElementById('grid');
        const scoreElement = document.getElementById('score');
        const resetButton = document.getElementById('reset');

        scoreElement.textContent = `Round: ${rounds}, Score: ${totalScore}, Next round in: 0`;

        function distance(cell1, cell2) {
            let x1 = cell1 % 5;
            let y1 = Math.floor(cell1 / 5);
            let x2 = cell2 % 5;
            let y2 = Math.floor(cell2 / 5);

            return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
        }

        function getColor(dist) {
            let normalizedDist = dist / Math.sqrt(50); 
            let r = Math.floor((1 - normalizedDist) * 255); 
            let g = 0; 
            let b = Math.floor(normalizedDist * 255); 

            return 'rgb(' + r + ',' + g + ',' + b + ')';
        }

        function getEmoji(dist) {
            if (dist < 1) return "üî•"; 
            else if (dist < 2) return "ü•µ"; 
            else if (dist < 3) return "ü•∂"; 
            else if (dist < 4) return "üßä"; 
            else return "‚ùÑÔ∏è"; 
        }

        function resetGame() {
            if (grid.classList.contains('resetting')) {
                return;
            }

            grid.classList.add('resetting');

            let countdown = 5;
            const countdownInterval = setInterval(() => {
                countdown--;
                scoreElement.textContent = `Round: ${rounds}, Score: ${totalScore}, Next round in: ${countdown}`;
                if (countdown === 0) {
                    clearInterval(countdownInterval);
                    hiddenCell = Math.floor(Math.random() * gridSize);
                    score = gridSize;
                    while (grid.firstChild) {
                        grid.removeChild(grid.firstChild);
                    }
                    for(let i = 0; i < gridSize; i++) {
                        const cell = document.createElement('div');
                        cell.className = 'cell';
                        cell.textContent = '';
                        cell.addEventListener('click', () => {
                            score--;
                            let dist = distance(i, hiddenCell);
                            cell.style.backgroundColor = getColor(dist);
                            if(i === hiddenCell) {
                                totalScore += score;
                                rounds++;
                                cell.textContent = "üèÜ";
                                resetGame();
                            } else {
                                cell.textContent = getEmoji(dist);
                            }
                            cell.removeEventListener('click', arguments.callee);
                        });

                        grid.appendChild(cell);
                    }
                    scoreElement.textContent = `Round: ${rounds}, Score: ${totalScore}, Next round in: 0`;
                    grid.classList.remove('resetting');
                }
            }, 1000);
        }

        function restartGame() {
            totalScore = 0;
            rounds = 0;
            resetGame();
        }

        for(let i = 0; i < gridSize; i++) {
            const cell = document.createElement('div');
            cell.className = 'cell';
            cell.textContent = '';
            cell.addEventListener('click', () => {
                score--;
                let dist = distance(i, hiddenCell);
                cell.style.backgroundColor = getColor(dist);
                if(i === hiddenCell) {
                    totalScore += score;
                    rounds++;
                    cell.textContent = "üèÜ";
                    resetGame();
                } else {
                    cell.textContent = getEmoji(dist);
                }
                cell.removeEventListener('click', arguments.callee);
            });

            grid.appendChild(cell);
        }

        resetButton.addEventListener('click', restartGame);

        const modal = document.getElementById('myModal');
        modal.style.display = "block";
        window.onclick = function(event) {
            if (event.target === modal) {
                modal.style.display = "none";
            }
        }
    </script>
</body>
</html>
